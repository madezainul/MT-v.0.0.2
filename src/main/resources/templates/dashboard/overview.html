<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/dashboard}">

<head>
	<title>Dashboard</title>
</head>

<body>
	<div layout:fragment="content">
		<div class="panel-header bg-primary-gradient">
			<div class="page-inner py-5">
				<div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
					<div>
						<h2 class="text-white pb-2 fw-bold">Dashboard</h2>
						<h5 class="text-white op-7 mb-2">Maintenance Overview</h5>
					</div>
					<div class="ml-md-auto py-2 py-md-0">
						<a href="#" class="btn btn-info btn-round" id="generateReportBtn">
							<i class="fas fa-file-pdf"></i> Generate Report
						</a>
					</div>
				</div>
			</div>
		</div>
		<div class="page-inner mt--5">

			<div class="row">
				<div class="col-md-12">
					<div class="card full-height">
						<div class="card-header">
							<div class="d-flex justify-content-between align-items-center">
								<h4 class="card-title">Overall Complaint</h4>
								<form id="complaint-stats-form" class="form-inline">
									<div class="input-group input-daterange">
										<input type="datetime-local" class="form-control form-control-sm"
											id="complaint-stats-from" name="from">
										<div class="input-group-prepend input-group-append">
											<span class="input-group-text">to</span>
										</div>
										<input type="datetime-local" class="form-control form-control-sm"
											id="complaint-stats-to" name="to">
										<div class="input-group-append">
											<button type="submit" class="btn btn-sm btn-primary ml-2">Apply</button>
											<button type="button" class="btn btn-sm btn-secondary ml-1"
												id="complaint-stats-reset">Reset</button>
										</div>
									</div>
								</form>
							</div>
						</div>
						<div class="card-body">
							<div class="row row-card-no-pd mb-0" style="box-shadow: none;">

								<!-- Total -->
								<div class="col-sm-6 col-md-3">
									<a href="#" class="text-decoration-none" data-status="">
										<div class="card card-stats card-primary card-round mt-1 cursor-pointer">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="fas fa-ticket-alt text-white"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Total</p>
															<h4 class="card-title" id="complaint-stats-total">--</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>

								<!-- Pending -->
								<div class="col-sm-6 col-md-3">
									<a href="#" class="text-decoration-none" data-status="PENDING">
										<div class="card card-stats card-danger card-round mt-1 cursor-pointer">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="fas fa-clock text-white"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Pending</p>
															<h4 class="card-title" id="complaint-stats-pending">--</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>

								<!-- Open -->
								<div class="col-sm-6 col-md-3">
									<a href="#" class="text-decoration-none" data-status="OPEN">
										<div class="card card-stats card-warning card-round mt-1 cursor-pointer">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="fas fa-folder-open text-white"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Open</p>
															<h4 class="card-title" id="complaint-stats-open">--</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>

								<!-- Closed -->
								<div class="col-sm-6 col-md-3">
									<a href="#" class="text-decoration-none" data-status="CLOSED">
										<div class="card card-stats card-success card-round mt-1 cursor-pointer">
											<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="icon-big text-center">
															<i class="fas fa-check-circle text-white"></i>
														</div>
													</div>
													<div class="col-7 col-stats">
														<div class="numbers">
															<p class="card-category">Closed</p>
															<h4 class="card-title" id="complaint-stats-closed">--</h4>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- <div class="row" sec:authorize="hasAnyRole('ENGINEER')">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex align-items-center">
                                <h4 class="card-title">My Tasks</h4>
                            </div>
                        </div>

                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="complaint-table" class="display table table-striped table-hover">
                                    <thead class="bg-primary text-white">
                                        <tr>
                                            <th style="min-width: 50px; cursor: pointer; white-space: nowrap;"
                                                data-sort="code">
                                                Code <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 135px; cursor: pointer; white-space: nowrap;"
                                                data-sort="reportDate">
                                                Report Date <i
                                                    class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 125px; cursor: pointer; white-space: nowrap;"
                                                data-sort="updatedAt">
                                                Last Update <i
                                                    class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 50px; cursor: pointer; white-space: nowrap;"
                                                data-sort="reporter">
                                                Reporter <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 100px; cursor: pointer; white-space: nowrap;"
                                                data-sort="area">
                                                Area <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 100px; cursor: pointer; white-space: nowrap;"
                                                data-sort="equipment">
                                                Equipment <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 100px; cursor: pointer; white-space: nowrap;"
                                                data-sort="subject">
                                                Subject <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 175px; cursor: pointer; white-space: nowrap;"
                                                data-sort="description">
                                                Description <i
                                                    class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 175px; cursor: pointer; white-space: nowrap;"
                                                data-sort="actionTaken">
                                                Action Taken <i
                                                    class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 50px; cursor: pointer; white-space: nowrap;"
                                                data-sort="assignee">
                                                Assignee <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 50px; cursor: pointer; white-space: nowrap;"
                                                data-sort="priority">
                                                Priority <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 50px; cursor: pointer; white-space: nowrap;"
                                                data-sort="category">
                                                Category <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 50px; cursor: pointer; white-space: nowrap;"
                                                data-sort="status">
                                                Status <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 130px; cursor: pointer; white-space: nowrap;"
                                                data-sort="closeTime">
                                                Close Time <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                            <th style="min-width: 100px; cursor: pointer; white-space: nowrap;"
                                                data-sort="totalTimeMinutes">
                                                Total Time <i class="fas fa-sort text-white-50 ml-1 sort-indicator"></i>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="complaint : ${complaints.content}" th:data-id="${complaint.id}">
                                            <td data-field="code">
                                                <a th:href="@{/complaints/{id}(id=${complaint.id})}"
                                                    class="font-weight-bold text-dark"
                                                    th:text="${complaint.code ?: '-'}">-</a>
                                            </td>
                                            <td data-field="reportDate"
                                                th:text="${complaint.reportDate != null ? #temporals.format(complaint.reportDate, 'MMM d, yyyy') : '-'}">
                                                -
                                            </td>
                                            <td data-field="updatedAt"
                                                th:text="${complaint.updatedAt != null ? #temporals.format(complaint.updatedAt, 'MMM d, yyyy HH:mm') : '-'}">
                                                -
                                            </td>
                                            <td data-field="reporter"
                                                th:data-employee-id="${complaint.reporter?.employeeId}"
                                                th:text="${complaint.reporter?.name ?: '-'}">
                                                -
                                            </td>
                                            <td data-field="area" th:data-area-code="${complaint.area?.code}"
                                                th:text="${complaint.area?.name ?: '-'}">
                                                -
                                            </td>
                                            <td data-field="equipment"
                                                th:data-equipment-code="${complaint.equipment?.code}"
                                                th:text="${complaint.equipment?.name ?: '-'}">
                                                -
                                            </td>
                                            <td data-field="subject" th:text="${complaint.subject ?: '-'}">-</td>
                                            <td data-field="description" th:text="${complaint.description ?: '-'}">-
                                            </td>
                                            <td data-field="actionTaken" th:text="${complaint.actionTaken ?: '-'}">-
                                            </td>
                                            <td data-field="assignee"
                                                th:data-employee-id="${complaint.assignee?.employeeId}"
                                                th:text="${complaint.assignee?.name ?: '-'}">-
                                            </td>
                                            <td data-field="priority">
                                                <span class="badge badge-pill px-3 py-2" th:classappend="${
                                                        complaint.priority == complaint.priority.HIGH ? 'badge-danger' :
                                                        complaint.priority == complaint.priority.MEDIUM ? 'badge-warning' :
                                                        'badge-success'
                                                    }" th:text="${complaint.priority ?: '-'}"></span>
                                            </td>
                                            <td data-field="category">
                                                <span class="badge badge-pill px-3 py-2" th:classappend="${
                                                        complaint.category == complaint.category.MECHANICAL ? 'badge-info' :
                                                        complaint.category == complaint.category.ELECTRICAL ? 'badge-danger' :
                                                        complaint.category == complaint.category.IT ? 'badge-success' :
                                                        'badge-dark'
                                                    }" th:text="${complaint.category ?: '-'}"></span>
                                            </td>
                                            <td data-field="status">
                                                <span class="badge badge-pill px-3 py-2" th:classappend="${
                                                        complaint.status == complaint.status.OPEN ? 'badge-warning' :
                                                        complaint.status == complaint.status.PENDING ? 'badge-danger' :
                                                        'badge-success'
                                                    }" th:text="${complaint.status ?: '-'}"></span>
                                            </td>
                                            <td data-field="closeTime"
                                                th:text="${complaint.closeTime != null ? #temporals.format(complaint.closeTime, 'MMM d, yyyy HH:mm') : '-'}">
                                                -
                                            </td>
                                            <td data-field="totalTimeMinutes"
                                                th:text="${complaint.totalTimeDisplay ?: '-'}">-</td>
                                        </tr>
                                        <tr th:if="${complaints.totalElements == 0}">
                                            <td colspan="15" class="text-center">No complaint found</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="row mt-3 align-items-center">
                                <div class="col-md-6 col-sm-12">
                                    <p class="text-muted mb-0">
                                        Showing
                                        <span th:text="${complaints.number * complaints.size + 1} ?: 0"></span>
                                        -
                                        <span
                                            th:text="${complaints.number * complaints.size + complaints.numberOfElements} ?: 0"></span>
                                        of <span th:text="${complaints.totalElements} ?: 0"></span> entries
                                    </p>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <nav class=" d-flex justify-content-end">
                                        <ul class="pagination mb-0">
                                            <li class="page-item"
                                                th:classappend="${!complaints.hasPrevious} ? 'disabled'">
                                                <a class="page-link"
                                                    th:href="@{/complaints(keyword=${param.keyword}, reportDateFrom=${param.reportDateFrom}, reportDateTo=${param.reportDateTo}, assigneeEmpId=${param.assigneeEmpId}, equipmentCode=${param.equipmentCode}, hiddenColumns=${hiddenColumns}, group=${param.group}, state=${param.state}, page=${complaints.number}, size=${pageSize}, sortBy=${sortBy}, asc=${asc})}"
                                                    th:if="${complaints.hasPrevious}">Prev</a>
                                                <span class="page-link" th:if="${!complaints.hasPrevious}">Prev</span>
                                            </li>

                                            <li class="page-item" th:if="${complaints.number > 0}"
                                                th:classappend="${!complaints.hasPrevious} ? 'disabled'">
                                                <a class="page-link"
                                                    th:href="@{/complaints(keyword=${param.keyword}, reportDateFrom=${param.reportDateFrom}, reportDateTo=${param.reportDateTo}, assigneeEmpId=${param.assigneeEmpId}, equipmentCode=${param.equipmentCode}, hiddenColumns=${hiddenColumns}, group=${param.group}, state=${param.state}, page=1, size=${pageSize}, sortBy=${sortBy}, asc=${asc})}">1</a>
                                            </li>

                                            <li class="page-item"
                                                th:if="${complaints.totalPages >= 3 and complaints.number > 1}">
                                                <span class="page-link">...</span>
                                            </li>

                                            <li class="page-item active">
                                                <span class="page-link" th:text="${complaints.number + 1}">1</span>
                                            </li>

                                            <li class="page-item"
                                                th:if="${complaints.totalPages >= 3 and complaints.number + 1 < complaints.totalPages - 1}">
                                                <span class="page-link">...</span>
                                            </li>

                                            <li class="page-item"
                                                th:if="${complaints.number + 1 < complaints.totalPages}"
                                                th:classappend="${!complaints.hasNext} ? 'disabled'">
                                                <a class="page-link"
                                                    th:href="@{/complaints(keyword=${param.keyword}, reportDateFrom=${param.reportDateFrom}, reportDateTo=${param.reportDateTo}, assigneeEmpId=${param.assigneeEmpId}, equipmentCode=${param.equipmentCode}, hiddenColumns=${hiddenColumns}, group=${param.group}, state=${param.state}, page=${complaints.totalPages}, size=${pageSize}, sortBy=${sortBy}, asc=${asc})}">
                                                    <span th:text="${complaints.totalPages}">20</span>
                                                </a>
                                            </li>

                                            <li class="page-item" th:classappend="${!complaints.hasNext} ? 'disabled'">
                                                <a class="page-link"
                                                    th:href="@{/complaints(keyword=${param.keyword}, reportDateFrom=${param.reportDateFrom}, reportDateTo=${param.reportDateTo}, assigneeEmpId=${param.assigneeEmpId}, equipmentCode=${param.equipmentCode}, hiddenColumns=${hiddenColumns}, group=${param.group}, state=${param.state}, page=${complaints.number + 2}, size=${pageSize}, sortBy=${sortBy}, asc=${asc})}"
                                                    th:if="${complaints.hasNext}">Next</a>
                                                <span class="page-link" th:if="${!complaints.hasNext}">Next</span>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

			<div class="row">
				<div class="col-md-12">
					<div class="card full-height">
						<div class="card-header">
							<div class="d-flex justify-content-between align-items-center">
								<h4 class="card-title">Complaint Chart</h4>

								<!-- Filter Dropdown - NOW ONLY HAS MONTHLY AND YEARLY -->
								<div class="dropdown">
									<button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button"
										id="complaintFilterDropdown" data-toggle="dropdown" aria-haspopup="true"
										aria-expanded="false">
										<i class="fas fa-filter"></i> Filters
									</button>
									<div class="dropdown-menu dropdown-menu-right p-3" style="width: 360px;"
										aria-labelledby="complaintFilterDropdown">
										<div class="form-group">
											<label for="complaint-from">Date Range</label>
											<div class="input-group input-daterange">
												<input type="date" class="form-control form-control-sm"
													id="complaint-from" required>
												<div class="input-group-prepend input-group-append">
													<span class="input-group-text">to</span>
												</div>
												<input type="date" class="form-control form-control-sm"
													id="complaint-to" required>
											</div>
										</div>

										<!-- REMOVE WEEKLY BUTTON — KEEP ONLY MONTHLY & YEARLY -->
										<div class="btn-group btn-group-sm d-flex mb-2">
											<!-- Inside Complaint Chart dropdown -->
											<button type="button"
												class="btn btn-outline-primary flex-fill complaint-filter"
												data-range="monthly">Monthly</button>
											<button type="button"
												class="btn btn-outline-primary flex-fill complaint-filter"
												data-range="yearly">Yearly</button>
										</div>

										<!-- Year Selector (shown in Yearly) -->
										<div id="complaint-year-selector" style="display: none;" class="mt-2">
											<div class="form-group">
												<label for="complaint-year-select">Year</label>
												<select id="complaint-year-select"
													class="form-control form-control-sm"></select>
											</div>
										</div>

										<!-- Month Selector (shown ONLY in Monthly mode) -->
										<div id="complaint-month-selector" style="display: none;" class="mt-2">
											<div class="form-group">
												<label for="complaint-month-select">Month</label>
												<select id="complaint-month-select"
													class="form-control form-control-sm">
													<option value="">All Months</option>
													<option value="01">January</option>
													<option value="02">February</option>
													<option value="03">March</option>
													<option value="04">April</option>
													<option value="05">May</option>
													<option value="06">June</option>
													<option value="07">July</option>
													<option value="08">August</option>
													<option value="09">September</option>
													<option value="10">October</option>
													<option value="11">November</option>
													<option value="12">December</option>
												</select>
											</div>
										</div>

										<button id="apply-complaint-filters"
											class="btn btn-sm btn-primary btn-block mt-2">
											Apply Filters
										</button>
									</div>
								</div>
							</div>
						</div>

						<!-- WEEKLY NAVIGATION CONTAINER — ALWAYS VISIBLE (since it's the default view) -->
						<div id="weekly-nav" class="d-flex justify-content-center align-items-center py-2"
							style="border-top: 1px solid #eee; margin-top: -1px;">
							<button class="btn btn-sm btn-outline-primary mx-1" id="prevWeekBtn" title="Previous Week"
								disabled>
								<i class="fas fa-chevron-left"></i> Prev
							</button>
							<span class="text-muted small mx-2" id="weekRangeLabel">Week of Jan 1–7, 2024</span>
							<button class="btn btn-sm btn-outline-primary mx-1" id="nextWeekBtn" title="Next Week"
								disabled>
								Next <i class="fas fa-chevron-right"></i>
							</button>
						</div>

						<div class="card-body d-flex flex-column">
							<div class="chart-container flex-grow-1">
								<canvas id="complaint-bar-chart"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12 col-lg-12">
					<div class="card">
						<div class="card-header">
							<div class="card-head-row card-tools-still-right">
								<h4 class="card-title">Engineers Responsibility</h4>
								<div class="card-tools">
									<button class="btn btn-icon btn-link btn-primary btn-xs" id="prevEngineerBtn"
										title="Previous">
										<i class="fas fa-chevron-left"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs" id="nextEngineerBtn"
										title="Next">
										<i class="fas fa-chevron-right"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs" id="refreshEngineerBtn"
										title="Refresh">
										<i class="fa fa-sync-alt"></i>
									</button>
								</div>
							</div>
							<p class="card-category">Map of the distribution of engineers responsibility</p>
						</div>
						<div class="card-body">
							<div class="table-responsive table-hover table-sales">
								<table class="table table-bordered text-center">
									<thead class="bg-primary text-white">
										<!-- Row 1: Main headers -->
										<tr>
											<th rowspan="2" class="align-middle">Engineer</th>
											<th colspan="3" class="align-middle">Total</th>
											<!-- Dynamic date headers will go here -->
										</tr>
										<!-- Row 2: Sub-headers -->
										<tr>
											<th>O</th>
											<th>P</th>
											<th>C</th>
											<!-- Dynamic sub-headers (Open/Closed per date) will go here -->
										</tr>
									</thead>
									<tbody id="engineerTableBody">
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>

				<!-- <div class="col-12 col-lg-2">
					<div class="card">
						<div class="card-header">
							<div class="card-head-row card-tools-still-right">
								<h4 class="card-title">Equipment</h4>
								<div class="card-tools">
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-work-prev-btn" title="Previous">
										<i class="fas fa-chevron-up"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-work-next-btn" title="Next">
										<i class="fas fa-chevron-down"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-work-refresh-btn" title="Refresh">
										<i class="fa fa-sync-alt"></i>
									</button>
								</div>
							</div>
							<p class="card-category">Top Equipment by Resolution Time</p>
						</div>
						<div class="card-body pb-0" id="equipment-work-list-container">
						</div>
					</div>
				</div> -->
			</div>


			<div class="row">
				<div class="col-md-12">
					<div class="card full-height">
						<div class="card-header">
							<div class="d-flex justify-content-between align-items-center">
								<h4 class="card-title">Work Report Chart</h4>

								<div class="dropdown">
									<button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button"
										id="wrFilterDropdown" data-toggle="dropdown" aria-haspopup="true"
										aria-expanded="false">
										<i class="fas fa-filter"></i> Filters
									</button>
									<div class="dropdown-menu dropdown-menu-right p-3" style="width: 360px;"
										aria-labelledby="wrFilterDropdown">
										<div class="form-group">
											<label for="wr-from">Date Range</label>
											<div class="input-group input-daterange">
												<input type="date" class="form-control form-control-sm" id="wr-from"
													required>
												<div class="input-group-prepend input-group-append">
													<span class="input-group-text">to</span>
												</div>
												<input type="date" class="form-control form-control-sm" id="wr-to"
													required>
											</div>
										</div>

										<div class="btn-group btn-group-sm d-flex mb-2">
											<button type="button" class="btn btn-outline-primary flex-fill wr-filter"
												data-range="monthly">Monthly</button>
											<button type="button" class="btn btn-outline-primary flex-fill wr-filter"
												data-range="yearly">Yearly</button>
										</div>

										<div id="wr-year-selector" style="display: none;" class="mt-2">
											<div class="form-group">
												<label for="wr-year-select">Year</label>
												<select id="wr-year-select"
													class="form-control form-control-sm"></select>
											</div>
										</div>

										<div id="wr-month-selector" style="display: none;" class="mt-2">
											<div class="form-group">
												<label for="wr-month-select">Month</label>
												<select id="wr-month-select" class="form-control form-control-sm">
													<option value="">All Months</option>
													<option value="01">January</option>
													<option value="02">February</option>
													<option value="03">March</option>
													<option value="04">April</option>
													<option value="05">May</option>
													<option value="06">June</option>
													<option value="07">July</option>
													<option value="08">August</option>
													<option value="09">September</option>
													<option value="10">October</option>
													<option value="11">November</option>
													<option value="12">December</option>
												</select>
											</div>
										</div>

										<button id="apply-wr-filters" class="btn btn-sm btn-primary btn-block mt-2">
											Apply Filters
										</button>
									</div>
								</div>
							</div>
						</div>

						<div id="wr-weekly-nav" class="d-flex justify-content-center align-items-center py-2"
							style="border-top: 1px solid #eee; margin-top: -1px; display: none;">
							<button class="btn btn-sm btn-outline-primary mx-1" id="wr-prevWeekBtn"
								title="Previous Week">
								<i class="fas fa-chevron-left"></i> Prev
							</button>
							<span class="text-muted small mx-2" id="wr-weekRangeLabel">Week of Jan 1–7, 2024</span>
							<button class="btn btn-sm btn-outline-primary mx-1" id="wr-nextWeekBtn" title="Next Week">
								Next <i class="fas fa-chevron-right"></i>
							</button>
						</div>

						<div class="card-body d-flex flex-column">
							<div class="chart-container flex-grow-1">
								<canvas id="wr-equipment-line-chart"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div class="card full-height">
						<div class="card-header">
							<div class="d-flex justify-content-between align-items-center">
								<h4 class="card-title">Breakdown Chart</h4>

								<div class="dropdown">
									<button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button"
										id="breakdownFilterDropdown" data-toggle="dropdown" aria-haspopup="true"
										aria-expanded="false">
										<i class="fas fa-filter"></i> Filters
									</button>
									<div class="dropdown-menu dropdown-menu-right p-3" style="width: 360px;"
										aria-labelledby="breakdownFilterDropdown">
										<div class="form-group">
											<label for="breakdown-from">Date Range</label>
											<div class="input-group input-daterange">
												<input type="date" class="form-control form-control-sm"
													id="breakdown-from" required>
												<div class="input-group-prepend input-group-append">
													<span class="input-group-text">to</span>
												</div>
												<input type="date" class="form-control form-control-sm"
													id="breakdown-to" required>
											</div>
										</div>

										<div class="btn-group btn-group-sm d-flex mb-2">
											<button type="button"
												class="btn btn-outline-primary flex-fill breakdown-filter"
												data-range="monthly">Monthly</button>
											<button type="button"
												class="btn btn-outline-primary flex-fill breakdown-filter"
												data-range="yearly">Yearly</button>
										</div>

										<div id="breakdown-year-selector" style="display: none;" class="mt-2">
											<div class="form-group">
												<label for="breakdown-year-select">Year</label>
												<select id="breakdown-year-select"
													class="form-control form-control-sm"></select>
											</div>
										</div>

										<div id="breakdown-month-selector" style="display: none;" class="mt-2">
											<div class="form-group">
												<label for="breakdown-month-select">Month</label>
												<select id="breakdown-month-select"
													class="form-control form-control-sm">
													<option value="">All Months</option>
													<option value="01">January</option>
													<option value="02">February</option>
													<option value="03">March</option>
													<option value="04">April</option>
													<option value="05">May</option>
													<option value="06">June</option>
													<option value="07">July</option>
													<option value="08">August</option>
													<option value="09">September</option>
													<option value="10">October</option>
													<option value="11">November</option>
													<option value="12">December</option>
												</select>
											</div>
										</div>

										<button id="apply-breakdown-filters"
											class="btn btn-sm btn-primary btn-block mt-2">
											Apply Filters
										</button>
									</div>
								</div>
							</div>
						</div>

						<div id="breakdown-weekly-nav" class="d-flex justify-content-center align-items-center py-2"
							style="border-top: 1px solid #eee; margin-top: -1px; display: none;">
							<button class="btn btn-sm btn-outline-primary mx-1" id="breakdown-prevWeekBtn"
								title="Previous Week">
								<i class="fas fa-chevron-left"></i> Prev
							</button>
							<span class="text-muted small mx-2" id="breakdown-weekRangeLabel">Week of Jan 1–7,
								2024</span>
							<button class="btn btn-sm btn-outline-primary mx-1" id="breakdown-nextWeekBtn"
								title="Next Week">
								Next <i class="fas fa-chevron-right"></i>
							</button>
						</div>

						<div class="card-body d-flex flex-column">
							<div class="chart-container flex-grow-1">
								<canvas id="breakdown-line-chart"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12 col-lg-6">
					<div class="card">
						<div class="card-header">
							<div class="card-head-row card-tools-still-right">
								<h4 class="card-title">Equipment</h4>
								<div class="card-tools">
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-work-prev-btn" title="Previous">
										<i class="fas fa-chevron-up"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-work-next-btn" title="Next">
										<i class="fas fa-chevron-down"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-work-refresh-btn" title="Refresh">
										<i class="fa fa-sync-alt"></i>
									</button>
								</div>
							</div>
							<p class="card-category">Top Equipment by Resolution Time</p>
						</div>
						<div class="card-body pb-0" id="equipment-count-container">
						</div>
					</div>
				</div>

				<div class="col-12 col-lg-6">
					<div class="card">
						<div class="card-header">
							<div class="card-head-row card-tools-still-right">
								<h4 class="card-title">Equipment</h4>
								<div class="card-tools">
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-status-prev-btn" title="Previous">
										<i class="fas fa-chevron-up"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-status-next-btn" title="Next">
										<i class="fas fa-chevron-down"></i>
									</button>
									<button class="btn btn-icon btn-link btn-primary btn-xs"
										id="equipment-status-refresh-btn" title="Refresh">
										<i class="fa fa-sync-alt"></i>
									</button>
								</div>
							</div>
							<p class="card-category text-muted mb-0">
								Open or pending complaints & work reports
							</p>
						</div>
						<div class="card-body pb-0" id="equipment-status-container">
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer class="footer">
			<div class="container-fluid">
				<nav class="pull-left">
					<ul class="nav">
						<li class="nav-item">
							<a class="nav-link" href="https://www.themekita.com">
								ThemeKita
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
								Help
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">
								Licenses
							</a>
						</li>
					</ul>
				</nav>
				<div class="copyright ml-auto">
					2018, made with <i class="fa fa-heart heart text-danger"></i> by <a
						href="https://www.themekita.com">ThemeKita</a>
				</div>
			</div>
		</footer>
	</div>

	<!-- Scripts Fragment -->
	<th:block layout:fragment="scripts">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<script th:inline="javascript">
			/*<![CDATA[*/
			const baseUrl = /*[[${@environment.getProperty('server.servlet.context-path', '')}]]*/ '' || '';
			const apiEndpoint = baseUrl + '/api/dashboards/status-count';
			/*]]>*/
		</script>
		<script th:src="@{/assets/js/overview-chart.js}"></script>
		<script th:src="@{/assets/js/generate-report.js}"></script>
	</th:block>
</body>

</html>